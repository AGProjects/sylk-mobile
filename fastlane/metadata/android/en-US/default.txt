Messaging and file transfers improvements

